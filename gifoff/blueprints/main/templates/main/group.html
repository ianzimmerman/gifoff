{% extends "layout.html" %}
{% from "macros.html" import challenge_list %}
{% block title %}Groups{% endblock %}
{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" />
{% endblock %}
{% block breadcrumb %}{{ breadcrumbs(group=group) }}{% endblock %}
{% block content %}
    <div class="">
        <h1>{{ group.name }} <small>owned by {{ group.owner.username }}</small></h1>
        <p class="lead">{{ group.description }}<br><a href="{{ url_for('main.join_group', name=group.name, pin=group.pin) }}">Invite Link</a></p>
        <select id="members" class="form-control" multiple>
            {% for p in group.players %}
                <option disabled>{{ p.username }}</option>
            {% endfor %}  
        </select><hr>
        
        <h2>Active & Pending Challenges</h2>
        {{ challenge_list(challenges.active) }}
        
        {% if current_user in group.authors and group.incomplete_count == 0 %}
         <p>
            <a href="{{ url_for('main.new_challenge', group_id=group) }}" class="btn btn-sm btn-primary">Create New Challenge</a>
         </p>
        {% endif %}
        
        
        <h2>Completed Challenges</h2>
        {{ challenge_list(challenges.complete) }}
    </div>
{% endblock %}
{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#members").select2({
            placeholder: "Member List"
        });
    });
</script>
{% endblock %}
